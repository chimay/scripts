#!/usr/bin/env -S sed -f

# ------------------------------------------------------------------------
#  Balises org
# ------------------------------------------------------------------------

/^\*/d

/^#+/d

/\[\[/d

# ------------------------------------------------------------------------
#  Paragraphes en une ligne
# ------------------------------------------------------------------------

/^$/! H

/^$/ b paragraphe
$ b paragrapheFin

d

b finParagraphes

# Paragraphe initial ou intérieur

:paragraphe

x
s/\n/ /g
#G

b finParagraphes

# Paragraphe final

:paragrapheFin

x
s/\n/ /g

b finParagraphes

:finParagraphes

# ------------------------------------------------------------------------
#  Divers
# ------------------------------------------------------------------------

/include/d
/http/d
/^charge();$/d

# ------------------------------------------------------------------------
#  Caractères spéciaux
# ------------------------------------------------------------------------

s/&.*;//g

# ------------------------------------------------------------------------
#  Groupement
# ------------------------------------------------------------------------

s/[{}()|]//g
s/\[//g
s/\]//g

# ------------------------------------------------------------------------
#  Espaces en début de ligne
# ------------------------------------------------------------------------

s/^\s//g

# ------------------------------------------------------------------------
#  Lignes vides ou vidées par les autres instructions
# ------------------------------------------------------------------------

/^$/d
